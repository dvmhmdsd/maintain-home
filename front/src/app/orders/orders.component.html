<mat-card>
  <div class="orders-page">
    <h1>{{ "create_order" | translate }}</h1>

    <mat-vertical-stepper [linear]="true" #stepper>
      <mat-step [stepControl]="ordersFormOne">
        <form [formGroup]="ordersFormOne">
          <ng-template matStepLabel>{{
            "fill_personal" | translate
          }}</ng-template>
          <mat-list>
            <mat-list-item role="listitem">
              <section class="form-group">
                <mat-form-field>
                  <mat-label>{{ "name" | translate }}</mat-label>
                  <input matInput formControlName="name" required />
                </mat-form-field>
                <div
                  class="error-message"
                  *ngIf="
                    ordersFormOne.get('name').hasError('required') &&
                    ordersFormOne.get('name').touched
                  "
                >
                  {{ "nameIsRequired" | translate }}
                </div>
              </section>
            </mat-list-item>
            <mat-list-item role="listitem">
              <section class="form-group">
                <mat-form-field>
                  <mat-label>{{ "email" | translate }}</mat-label>
                  <input
                    matInput
                    formControlName="email"
                    required
                    type="email"
                  />
                </mat-form-field>
                <div
                  class="error-message"
                  *ngIf="
                    ordersFormOne.get('email').hasError('required') &&
                    ordersFormOne.get('email').touched
                  "
                >
                  {{ "emailIsRequired" | translate }}
                </div>
                <div
                  class="error-message"
                  *ngIf="
                    ordersFormOne.get('email').hasError('pattern') &&
                    ordersFormOne.get('email').touched
                  "
                >
                  {{ "emailNotValid" | translate }}
                </div>
              </section>
            </mat-list-item>
            <mat-list-item role="listitem">
              <section class="form-group">
                <mat-form-field>
                  <mat-label>{{ "phone" | translate }}</mat-label>
                  <input matInput formControlName="phone" required type="tel" />
                </mat-form-field>
                <div
                  class="error-message"
                  *ngIf="
                    ordersFormOne.get('phone').hasError('required') &&
                    ordersFormOne.get('phone').touched
                  "
                >
                  {{ "phoneIsRequired" | translate }}
                </div>
              </section>
            </mat-list-item>
            <mat-list-item role="listitem">
              <section class="form-group">
                <mat-form-field>
                  <mat-label>{{ "whatsapp" | translate }}</mat-label>
                  <input
                    matInput
                    formControlName="whatsapp"
                    required
                    type="tel"
                  />
                </mat-form-field>
                <div
                  class="error-message"
                  *ngIf="
                    ordersFormOne.get('whatsapp').hasError('required') &&
                    ordersFormOne.get('whatsapp').touched
                  "
                >
                  {{ "whatsappIsRequired" | translate }}
                </div>
              </section>
            </mat-list-item>
            <mat-list-item role="listitem">
              <section class="form-group">
                <mat-form-field>
                  <mat-label>{{ "address" | translate }}</mat-label>
                  <input
                    matInput
                    formControlName="location"
                    required
                    type="text"
                  />
                </mat-form-field>
                <div
                  class="error-message"
                  *ngIf="
                    ordersFormOne.get('location').hasError('required') &&
                    ordersFormOne.get('location').touched
                  "
                >
                  {{ "locationIsRequired" | translate }}
                </div>
              </section>
            </mat-list-item>
            <mat-list-item role="listitem">
              <a *ngIf="!gps" mat-raised-button (click)="getUserLocation()">
                {{ "gps" | translate }}
              </a>
              <a
                *ngIf="gps"
                mat-raised-button
                href="https://maps.google.com/maps?q={{ gps.latitude }},{{
                  gps.longitude
                }}&hl=es;z=14"
                target="_blank"
                >{{ "gps_show" | translate }}</a
              >
            </mat-list-item>
          </mat-list>
          <div>
            <button mat-button matStepperNext>{{ "next" | translate }}</button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="ordersFormTwo">
        <form [formGroup]="ordersFormTwo">
          <ng-template matStepLabel>{{ "fill_order" | translate }}</ng-template>
          <mat-list>
            <mat-list-item role="listitem">
              <section class="form-group">
                <mat-form-field>
                  <mat-label>{{ "device" | translate }}</mat-label>
                  <mat-select formControlName="device">
                    <mat-option
                      *ngFor="let device of devicesList"
                      [value]="device._id"
                    >
                      {{
                        currentLanguage === "en"
                          ? device.name
                          : device.arabicName
                      }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <div
                  class="error-message"
                  *ngIf="
                    ordersFormTwo.get('device').hasError('required') &&
                    ordersFormTwo.get('device').touched
                  "
                >
                  {{ "deviceIsRequired" | translate }}
                </div>
              </section>
            </mat-list-item>
            <mat-list-item role="listitem">
              <section class="form-group">
                <mat-form-field>
                  <mat-label>{{ "model" | translate }}</mat-label>
                  <input
                    matInput
                    formControlName="model"
                    required
                    type="text"
                  />
                </mat-form-field>
                <div
                  class="error-message"
                  *ngIf="
                    ordersFormTwo.get('model').hasError('required') &&
                    ordersFormTwo.get('model').touched
                  "
                >
                  {{ "modelIsRequired" | translate }}
                </div>
              </section>
            </mat-list-item>
            <mat-list-item role="listitem">
              <section class="form-group">
                <mat-label>{{ "paymentType" | translate }}: </mat-label>
                <mat-radio-group formControlName="paymentType">
                  <mat-radio-button class="radio-margin" value="cash">
                    <span>{{ "cash" | translate }}</span>
                  </mat-radio-button>
                  <mat-radio-button class="radio-margin" value="card">
                    <span>{{ "credit" | translate }}</span>
                  </mat-radio-button>
                </mat-radio-group>
              </section>
            </mat-list-item>
            <mat-list-item role="listitem">
              <section class="form-group">
                <mat-label>{{ "time" | translate }}: </mat-label>
                <mat-radio-group formControlName="time">
                  <mat-radio-button class="radio-margin" value="صباحًا">
                    <span>{{ "am" | translate }}</span>
                  </mat-radio-button>
                  <mat-radio-button class="radio-margin" value="مساءًا">
                    <span>{{ "pm" | translate }}</span>
                  </mat-radio-button>
                </mat-radio-group>
              </section>
            </mat-list-item>
            <mat-list-item role="listitem">
              <section class="form-group">
                <mat-form-field class="example-full-width">
                  <mat-label>{{ "damage" | translate }}*</mat-label>
                  <textarea matInput formControlName="damage"></textarea>
                </mat-form-field>
                <div
                  class="error-message"
                  *ngIf="
                    ordersFormTwo.get('damage').hasError('required') &&
                    ordersFormTwo.get('damage').touched
                  "
                >
                  {{ "damageIsRequired" | translate }}
                </div>
              </section>
            </mat-list-item>
            <section class="form-group checkbox">
              <mat-checkbox class="radio-margin" formControlName="hint">{{
                "visit_pay_hint" | translate
              }}</mat-checkbox>
            </section>
          </mat-list>
          <div>
            <button mat-button matStepperPrevious>
              {{ "back" | translate }}
            </button>
            <button
              mat-raised-button
              (click)="createOrder()"
              [disabled]="ordersFormOne.invalid || ordersFormTwo.invalid"
            >
              {{ "create" | translate }}
            </button>
          </div>
        </form>
      </mat-step>
    </mat-vertical-stepper>
  </div>
</mat-card>
